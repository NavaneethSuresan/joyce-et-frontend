{"ast":null,"code":"import API from \"../../API\";\nimport { addFavoriteAction, fetchFavoriteAction, deleteFavoriteAction } from \"./actions\";\nconst api = new API();\nconst FAVORITES_KEY = \"FAVORITES_KEY\";\nexport const fetchFromLocalStorage = () => {\n  return async dispatch => {\n    let favoritesJSON = localStorage.getItem(FAVORITES_KEY);\n    let favorites = [];\n\n    if (favoritesJSON) {\n      favorites = JSON.parse(favoritesJSON);\n    }\n\n    dispatch(fetchFavoriteAction(favorites));\n  };\n};\nexport const addFavorite = place => {\n  return async (dispatch, getState) => {\n    let prevFavorites = getState().favorites.list;\n    console.log(\"prevFavorites\", place);\n    let nextFavorites = prevFavorites;\n\n    if (!prevFavorites.some(favorite => favorite.id === place.id)) {\n      nextFavorites = [place, ...prevFavorites];\n    }\n\n    setToLocalStorage(nextFavorites);\n    dispatch(addFavoriteAction(nextFavorites));\n  };\n};\nexport const deleteFavorite = id => {\n  return async (dispatch, getState) => {\n    let prevFavorites = getState().favorites.list;\n    const nextFavorites = prevFavorites.filter(favorite => favorite.id === place.id);\n    setToLocalStorage(nextFavorites);\n    dispatch(deleteFavoriteAction(nextFavorites));\n  };\n};\nexport const setToLocalStorage = favorites => {\n  localStorage.setItem(FAVORITES_KEY, JSON.stringify(favorites));\n};","map":{"version":3,"names":["API","addFavoriteAction","fetchFavoriteAction","deleteFavoriteAction","api","FAVORITES_KEY","fetchFromLocalStorage","dispatch","favoritesJSON","localStorage","getItem","favorites","JSON","parse","addFavorite","place","getState","prevFavorites","list","console","log","nextFavorites","some","favorite","id","setToLocalStorage","deleteFavorite","filter","setItem","stringify"],"sources":["/Users/apple/Desktop/joycd_sd_updated/frontend/src/reducks/favorites/operations.js"],"sourcesContent":["import API from \"../../API\";\nimport {\n  addFavoriteAction,\n  fetchFavoriteAction,\n  deleteFavoriteAction,\n} from \"./actions\";\nconst api = new API();\n\nconst FAVORITES_KEY = \"FAVORITES_KEY\";\nexport const fetchFromLocalStorage = () => {\n  return async (dispatch) => {\n    let favoritesJSON = localStorage.getItem(FAVORITES_KEY);\n    let favorites = [];\n    if (favoritesJSON) {\n      favorites = JSON.parse(favoritesJSON);\n    }\n    dispatch(fetchFavoriteAction(favorites));\n  };\n};\nexport const addFavorite = (place) => {\n  return async (dispatch, getState) => {\n    let prevFavorites = getState().favorites.list;\n    console.log(\"prevFavorites\",place);\n    let nextFavorites = prevFavorites\n    if(!prevFavorites.some(favorite=>favorite.id === place.id)){\n    nextFavorites = [place, ...prevFavorites];\n    }\n   \n    setToLocalStorage(nextFavorites);\n    dispatch(addFavoriteAction(nextFavorites));\n  };\n};\nexport const deleteFavorite = (id) => {\n  return async (dispatch, getState) => {\n    let prevFavorites = getState().favorites.list;\n    const nextFavorites = prevFavorites.filter(favorite=>favorite.id === place.id);\n    setToLocalStorage(nextFavorites);\n    dispatch(deleteFavoriteAction(nextFavorites));\n  };\n};\nexport const setToLocalStorage = (favorites) => {\n  localStorage.setItem(FAVORITES_KEY, JSON.stringify(favorites));\n};\n\n\n\n\n"],"mappings":"AAAA,OAAOA,GAAP,MAAgB,WAAhB;AACA,SACEC,iBADF,EAEEC,mBAFF,EAGEC,oBAHF,QAIO,WAJP;AAKA,MAAMC,GAAG,GAAG,IAAIJ,GAAJ,EAAZ;AAEA,MAAMK,aAAa,GAAG,eAAtB;AACA,OAAO,MAAMC,qBAAqB,GAAG,MAAM;EACzC,OAAO,MAAOC,QAAP,IAAoB;IACzB,IAAIC,aAAa,GAAGC,YAAY,CAACC,OAAb,CAAqBL,aAArB,CAApB;IACA,IAAIM,SAAS,GAAG,EAAhB;;IACA,IAAIH,aAAJ,EAAmB;MACjBG,SAAS,GAAGC,IAAI,CAACC,KAAL,CAAWL,aAAX,CAAZ;IACD;;IACDD,QAAQ,CAACL,mBAAmB,CAACS,SAAD,CAApB,CAAR;EACD,CAPD;AAQD,CATM;AAUP,OAAO,MAAMG,WAAW,GAAIC,KAAD,IAAW;EACpC,OAAO,OAAOR,QAAP,EAAiBS,QAAjB,KAA8B;IACnC,IAAIC,aAAa,GAAGD,QAAQ,GAAGL,SAAX,CAAqBO,IAAzC;IACAC,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA4BL,KAA5B;IACA,IAAIM,aAAa,GAAGJ,aAApB;;IACA,IAAG,CAACA,aAAa,CAACK,IAAd,CAAmBC,QAAQ,IAAEA,QAAQ,CAACC,EAAT,KAAgBT,KAAK,CAACS,EAAnD,CAAJ,EAA2D;MAC3DH,aAAa,GAAG,CAACN,KAAD,EAAQ,GAAGE,aAAX,CAAhB;IACC;;IAEDQ,iBAAiB,CAACJ,aAAD,CAAjB;IACAd,QAAQ,CAACN,iBAAiB,CAACoB,aAAD,CAAlB,CAAR;EACD,CAVD;AAWD,CAZM;AAaP,OAAO,MAAMK,cAAc,GAAIF,EAAD,IAAQ;EACpC,OAAO,OAAOjB,QAAP,EAAiBS,QAAjB,KAA8B;IACnC,IAAIC,aAAa,GAAGD,QAAQ,GAAGL,SAAX,CAAqBO,IAAzC;IACA,MAAMG,aAAa,GAAGJ,aAAa,CAACU,MAAd,CAAqBJ,QAAQ,IAAEA,QAAQ,CAACC,EAAT,KAAgBT,KAAK,CAACS,EAArD,CAAtB;IACAC,iBAAiB,CAACJ,aAAD,CAAjB;IACAd,QAAQ,CAACJ,oBAAoB,CAACkB,aAAD,CAArB,CAAR;EACD,CALD;AAMD,CAPM;AAQP,OAAO,MAAMI,iBAAiB,GAAId,SAAD,IAAe;EAC9CF,YAAY,CAACmB,OAAb,CAAqBvB,aAArB,EAAoCO,IAAI,CAACiB,SAAL,CAAelB,SAAf,CAApC;AACD,CAFM"},"metadata":{},"sourceType":"module"}